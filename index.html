<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Nuestra Historia</title>

<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500&display=swap" rel="stylesheet">

<style>
/* ===== RESET ===== */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

html, body {
    background: #0b0b10;
    font-family: 'Playfair Display', serif;
    color: white;
    overflow-x: hidden;
    scroll-behavior: smooth;
}

/* ===== INTRO CINEMÁTICA ===== */
.intro {
    position: fixed;
    width: 100%;
    height: 100vh;
    background: #000;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 3000;
    font-size: 1.2rem;
    letter-spacing: 4px;
    animation: fadeOutIntro 3s ease 2.5s forwards;
}

@keyframes fadeOutIntro {
    to {
        opacity: 0;
        visibility: hidden;
    }
}

/* ===== NAVBAR ===== */
nav {
    position: fixed;
    top: 0;
    width: 100%;
    padding: 18px 20px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0, 0, 0, 0.45);
    backdrop-filter: blur(14px);
    z-index: 1000;
    transition: 0.4s ease;
}

.logo {
    font-size: 0.75rem;
    letter-spacing: 3px;
    opacity: 0.85;
}

.menu a {
    text-decoration: none;
    color: white;
    margin-left: 15px;
    font-size: 0.75rem;
    letter-spacing: 2px;
    opacity: 0.6;
    transition: 0.3s;
}

.menu a:hover {
    opacity: 1;
}

/* ===== HERO SLIDER ===== */
.slider {
    position: relative;
    height: 100vh;
    width: 100%;
    overflow: hidden;
}

.slide {
    position: absolute;
    width: 100%;
    height: 100%;
    background-size: cover;
    background-position: center;
    opacity: 0;
    transition: opacity 1.8s ease-in-out, transform 8s ease-in-out;
    transform: scale(1);
}

.slide.active {
    opacity: 1;
    transform: scale(1.08);
}

.overlay {
    position: absolute;
    width: 100%;
    height: 100%;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.2), rgba(0, 0, 0, 0.85));
}

/* ===== HERO TEXT ===== */
.hero-text {
    position: absolute;
    bottom: 130px;
    width: 100%;
    text-align: center;
    font-size: 1.1rem;
    letter-spacing: 4px;
    opacity: 0;
    transform: translateY(20px);
    animation: heroFade 2.5s ease forwards;
    animation-delay: 3s;
    padding: 0 20px;
}

@keyframes heroFade {
    to {
        opacity: 0.9;
        transform: translateY(0);
    }
}

/* ===== CONTADOR ===== */
.counter {
    position: absolute;
    bottom: 90px;
    width: 100%;
    text-align: center;
    font-size: 0.8rem;
    letter-spacing: 2px;
    opacity: 0.7;
    animation: heroFade 2.5s ease forwards;
    animation-delay: 3.5s;
}

/* ===== SECCIONES ===== */
.section {
    padding: 90px 22px;
    max-width: 520px;
    margin: auto;
    text-align: center;
    opacity: 0;
    transform: translateY(40px);
    transition: 1s ease;
}

.section.visible {
    opacity: 1;
    transform: translateY(0);
}

.section h2 {
    font-size: 1.6rem;
    font-weight: 400;
    margin-bottom: 20px;
    letter-spacing: 2px;
}

.section p {
    font-size: 1rem;
    line-height: 1.9;
    letter-spacing: 0.5px;
    opacity: 0.75;
}

.divider {
    width: 30px;
    height: 1px;
    background: white;
    margin: 40px auto;
    opacity: 0.3;
}

/* ===== FOOTER ===== */
footer {
    padding: 70px 20px;
    text-align: center;
    font-size: 0.75rem;
    opacity: 0.4;
}

audio {
    display: none;
}
</style>
</head>

<body>

<div class="intro">
    Esta es nuestra historia…
</div>

<nav>
    <div class="logo">NUESTRA HISTORIA</div>
    <div class="menu">
        <a href="index.html">Inicio</a>
        <a href="viajes.html">Nuestros Viajes</a>
        <a href="pelicula.html">EL Momento</a>

    </div>
</nav>

<div class="slider">
    <div class="slide active" style="background-image:url('viaje1.jpg')"></div>
    <div class="slide" style="background-image:url('viaje2.jpg')"></div>
    <div class="slide" style="background-image:url('viaje4.jpg')"></div>
    <div class="slide" style="background-image:url('viaje5.jpg')"></div>
    <div class="slide" style="background-image:url('viaje3.jpg')"></div>
    <div class="slide" style="background-image:url('momento1.jpg')"></div>
    <div class="slide" style="background-image:url('momento2.jpg')"></div>
    <div class="slide" style="background-image:url('momento3.jpg')"></div>
    <div class="overlay"></div>
    <div class="hero-text" id="heroPhrase"></div>
    <div class="counter" id="counter"></div>
</div>

<div class="section">
    <h2>Todo empezó sin planearlo</h2>
    <p>
    Y terminó siendo lo más bonito que me ha pasado. Desde aquel día en el que los dos empezamos a sentir por el otro, se juntaron dos deseos que han sido capaces de evolucionar en unos sentimientos capaces de deslumbrar nuestra relación. El camino que nos queda, Victoria, está construyéndose de manera que los dos seamos capaces de disfrutar cada momento juntos. Cada viaje, cada sonrisa, cada lágrima… momentos para recordar que quedarán guardados para siempre. Y seguramente, algún día, nos sentemos abrazados en nuestro sofá y podamos ver todo esto recopilado en un mismo lugar.
    </p>
    <div class="divider"></div>
</div>

<div class="section">
    <h2>Momentos</h2>
    <p>
Risas. Viajes. Silencios que dicen más que mil palabras.  
Es por eso por lo que este “rinconcito” ha sido creado, para que cuando queramos mirar nuestro camino juntos, lo podamos disfrutar en cada momento y en cada lugar en el que estemos. Lo iremos actualizando juntos, cada 14 de febrero, donde subiremos todos los momentos que queremos que sean recordados para siempre.
    </p>
    <div class="divider"></div>
</div>

<div class="section">
    <h2>Lo que viene</h2>
    <p>
No sé dónde será.  
Pero sé que será contigo. Y cuando pienso en eso, todo lo demás deja de importarme, porque lo importante no es el lugar ni la situación, sino estar juntos en cada momento. Como cuando estamos cansados y nos tumbamos a dormir un rato, o cuando no nos decidimos dónde ir a comer pero sabemos que elegiremos un lugar que nos encantará a los dos. Incluso las fotos en las que alguno sale mal terminan siendo especiales, porque no capturan una imagen perfecta, sino un momento real. Y creo que de eso se trata todo: no de que sea impecable, sino de que sea auténtico. De cómo lo compartamos, de cómo lo vivamos tal y como venga, sabiendo que lo importante no es cómo se ve desde fuera, sino cómo se siente por dentro.
    </p>
</div>

<footer>
    Hecho con calma. Hecho contigo.
</footer>

<audio id="globalMusic" autoplay loop>
    <source src="musica.mp3" type="audio/mpeg">
</audio>

<script>
/* ===== FRASE DINÁMICA ===== */
const frases = [
    "Nuestra historia sigue escribiéndose.",
    "No sé dónde será, pero será contigo.",
    "Lo mejor nunca se planea.",
    "Nuestro lugar favorito es donde estemos juntos."
];

document.getElementById("heroPhrase").textContent =
    frases[Math.floor(Math.random() * frases.length)];

/* ===== SLIDER ===== */
const slides = document.querySelectorAll(".slide");
let current = 0;
function nextSlide() {
    slides[current].classList.remove("active");
    current = (current + 1) % slides.length;
    slides[current].classList.add("active");
}
setInterval(nextSlide, 6500);

/* ===== SCROLL REVEAL ===== */
const sections = document.querySelectorAll(".section");
function reveal() {
    sections.forEach(sec => {
        if (sec.getBoundingClientRect().top < window.innerHeight - 60) {
            sec.classList.add("visible");
        }
    });
}
window.addEventListener("scroll", reveal);
reveal();

/* ===== NAVBAR OSCURA ===== */
window.addEventListener("scroll", () => {
    document.querySelector("nav").style.background =
        window.scrollY > 20 ? "rgba(0,0,0,0.75)" : "rgba(0,0,0,0.45)";
});

/* ===== MÚSICA GLOBAL COMPATIBLE MÓVIL ===== */
const music = document.getElementById("globalMusic");

/* Restaurar tiempo guardado */
window.addEventListener("load", () => {
    const savedTime = localStorage.getItem("musicTime");
    if (savedTime) {
        music.currentTime = parseFloat(savedTime);
    }
    attemptAutoplay();
});

/* Intentar autoplay */
function attemptAutoplay() {
    const playPromise = music.play();
    if (playPromise !== undefined) {
        playPromise
            .then(() => {
                // Autoplay funcionó
            })
            .catch(() => {
                // Si el navegador bloquea, esperar primer toque
                enableOnFirstTouch();
            });
    }
}

/* Activar en primer toque (invisible) */
function enableOnFirstTouch() {
    const startMusic = () => {
        music.play().catch(() => { });
        document.removeEventListener("touchstart", startMusic);
        document.removeEventListener("click", startMusic);
    };

    document.addEventListener("touchstart", startMusic, { once: true });
    document.addEventListener("click", startMusic, { once: true });
}

/* Guardar tiempo constantemente */
setInterval(() => {
    if (!music.paused) {
        localStorage.setItem("musicTime", music.currentTime);
    }
}, 1000);

/* Si vuelve a la pestaña, reintentar */
document.addEventListener("visibilitychange", () => {
    if (document.visibilityState === "visible" && music.paused) {
        music.play().catch(() => { });
    }
});
</script>

</body>
</html>
